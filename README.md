# Сокращатель ссылок

Простой сервис для сокращения ссылок на чистом PHP.

## Возможности
- Сокращение ссылок через веб‑форму и JSON‑API
- MVC‑архитектура без фреймворков и composer
- Используется MariaDB через PDO
- Лёгкий Docker‑образ на базе Alpine с одним расширением `pdo_mysql` для быстрой сборки
- Проверка коллизий и повторное использование существующих кодов
- Объекты Request/Response вместо глобальных массивов
- Защита формы от CSRF и ограничение частоты обращений к API

## Запуск
1. Сборка и запуск контейнеров:
   ```bash
   docker compose up --build -d
   ```
   Будут подняты три сервиса: `nginx`, `php` (PHP‑FPM) и `mariadb`.

2. Приложение станет доступно на `http://localhost:8080`.
   Данные базы данных хранятся в volume `db-data`, а логи — в каталоге `storage`.
3. Параметры подключения к БД см. в `.env.example`
   (хост `mariadb`, логин и пароль `root`/`root`).

## API
`POST /api/shorten`
```json
{ "url": "https://example.com" }
```
Ответ:
```json
 { "short": "http://localhost:8080/abc123" }
```

## Веб-интерфейс
Откройте `http://localhost:8080` и используйте форму для сокращения ссылок.
